@page "/"
@using test_shit.Data
@using test_shit.Network
@inject IJSRuntime JSRuntime
@inject NetworkImpl _networkImpl
 
 
<div class="mainView">
    <div class="container">
        <div class="row">
            <h4>Movies</h4>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Action</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="container-fluid">
                    <div id="carousel-example" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner row w-100 mx-auto" role="listbox">
                            <div class="carousel-item col-12 col-sm-6 col-md-4 col-lg-3 active">
                                 <img src="test-images/movie_example.jpg" alt="" style="width: 400px; height: 650px"/>
                                </div>
                            @foreach (var item in _mResults)
                            {
                                <div class="carousel-item col-12 col-sm-6 col-md-4 col-lg-3">
                                    <img src=@item.poster_path alt="" style="width: 400px; height: 650px"/>
                                </div>
                            }


                        </div>
                        <a class="carousel-control-prev" href="#carousel-example" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carousel-example" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
            
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Comedy</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Crime</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Drama</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Fantasy</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Horror</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Romance</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Science</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Thriller</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
        <div class="row">
            <div class="col-md-12">
                <h3 class="movieTitles">Historical</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>///////////////////////////////////////////////////////////////////// image slider here/////////////////////////////////////////////////////////////</p>
            </div>
        </div>
     
     
     
    </div>
</div>

@code {
    private int _genre;
    private TopRated _movies = new TopRated();
    private List<TopRated.Result> _mResults = new List<TopRated.Result>();
    

    string SearchTerm { get; set; } = "";
    
    
    protected override async Task OnInitializedAsync()
    {
        try
        {
           _movies = await _networkImpl.getMovieBasedOnGenreFromApi(28);
            _mResults = _movies.results;
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JSRuntime.InvokeVoidAsync("startCarousels"); // NOTE: call JavaScript function
    }
}